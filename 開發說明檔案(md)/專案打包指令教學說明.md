# 專案打包指令教學說明

## 目錄
1. [前言](#前言)
2. [前端打包說明](#前端打包說明)
3. [後端打包說明](#後端打包說明)
4. [打包檔案結構說明](#打包檔案結構說明)
5. [更新檢查與重新打包時機](#更新檢查與重新打包時機)
6. [常見問題與解決方案](#常見問題與解決方案)

## 前言
本文件說明如何正確打包員工智慧考核系統的前後端專案，確保系統能夠順利部署和運行。

## 前端打包說明

### 打包步驟
1. 切換到專案根目錄：
```bash
cd C:\Users\user\Desktop\潤股-智慧評估系統\employee_smart_assessment_system
```

2. 執行建置指令：
```bash
npm run build
```

3. 複製建置檔案到目標資料夾：
```bash
xcopy /E /I /Y build "C:\Users\user\Desktop\潤股-智慧評估系統\employee_smart_assessment_system\Emp_Smart_Assess_Sys_frontend_build (Web)\frontend"
```

### 前端打包檔案說明
- `static/` - 包含壓縮後的 JS 和 CSS 檔案
- `index.html` - 應用程式入口點
- `manifest.json` - PWA 配置檔案
- `asset-manifest.json` - 資源映射檔案
- `server.js` - 用於生產環境的靜態檔案服務器

## 後端打包說明

### 打包步驟
1. 在專案根目錄"潤股-智慧評估系統\employee_smart_assessment_system\PointsManagementAPI"執行：
```bash
dotnet publish -c Release -o "..\Emp_Smart_Assess_Sys_frontend_build (Web)\backend"
```

### 後端打包檔案說明
- `PointsManagementAPI.dll` - 主要應用程式組件
- `appsettings.json` - 應用程式配置檔案
- 相關依賴 DLL 檔案
- 資料庫遷移檔案

## 打包檔案結構說明

### 前端檔案結構
```
frontend/
├── static/
│   ├── css/
│   │   └── main.*.css
│   └── js/
│       └── main.*.js
├── index.html
├── manifest.json
├── server.js
└── asset-manifest.json
```

### 後端檔案結構
```
backend/
├── PointsManagementAPI.dll
├── PointsManagementAPI.exe
├── appsettings.json
├── appsettings.Development.json
├── appsettings.Production.json
└── [其他依賴 DLL 檔案]
```

## 更新檢查與重新打包時機

### 需要重新打包的情況
1. 前端代碼更新：
   - 修改了 `src/` 目錄下的任何檔案
   - 更新了 `package.json` 的依賴
   - 修改了配置檔案（如 `apiConfig.js`）

2. 後端代碼更新：
   - 修改了 Controllers、Services 或 Models
   - 更新了 NuGet 套件
   - 修改了 `Program.cs` 或其他配置檔案

### 當前專案更新狀態
根據檢查，以下檔案有更新，需要重新打包：

1. 前端更新：
   - `src/config/apiConfig.js` 有修改

2. 後端更新：
   - `PointsManagementAPI/Program.cs` 有修改

## 常見問題與解決方案

### 1. CORS 問題
- 檢查 `Program.cs` 中的 CORS 配置
- 確認 `apiConfig.js` 中的 API 基礎 URL 設置

### 2. 打包後檔案不完整
- 確保執行打包指令前已安裝所有依賴
- 檢查 `package.json` 和專案檔案的完整性

### 3. 環境配置問題
- 確認 `appsettings.json` 中的配置正確
- 檢查環境變數設置

## 注意事項
1. 打包前請確保所有代碼已經提交或備份
2. 打包後請測試確認功能正常
3. 保持前後端版本的一致性
4. 注意檔案權限設置
