# 📋 資料庫重置與帳號創建指南

## 🎯 概述

`database_init.sql` 已更新，移除了所有預設的員工帳號。現在您可以使用乾淨的資料庫環境來創建自己的測試帳號。

## 🔄 資料庫重置步驟

### 1. 執行更新後的 SQL 腳本
```bash
# 在 PostgreSQL 中執行
psql -U postgres -d PointsManagementDB -f database_init.sql
```

### 2. 確認資料庫結構
執行後，資料庫將包含：
- ✅ 完整的表格結構
- ✅ 33項積分標準設定
- ✅ 部門資料
- ❌ **無預設員工帳號** (已移除)

## 👥 創建測試帳號

### 方法一：使用系統註冊功能 (推薦)
1. 啟動後端服務：
   ```bash
   cd PointsManagementAPI
   dotnet run
   ```

2. 啟動前端服務：
   ```bash
   cd employee_smart_assessment_system
   npm start
   ```

3. 訪問註冊頁面：`http://localhost:3002/register`

4. 創建測試帳號：
   - **員工帳號**：
     - 姓名：測試員工
     - 員工編號：TEST001
     - 角色：employee
     - 部門：製造部
     - 密碼：自定義

   - **主管帳號**：
     - 姓名：測試主管
     - 員工編號：TEST002
     - 角色：manager
     - 部門：製造部
     - 密碼：自定義

### 方法二：手動 SQL 插入
如果需要手動插入，請修改 `database_init.sql` 第 320-325 行的註解部分：

```sql
-- 取消註解並修改以下內容：
INSERT INTO "Employees" ("Name", "EmployeeNumber", "Email", "DepartmentId", "Position", "Role", "HireDate", "PasswordHash") VALUES
('測試員工', 'TEST001', 'test@company.com', 1, '技術士', 'employee', CURRENT_TIMESTAMP, '$2a$11$你的密碼哈希'),
('測試主管', 'TEST002', 'manager@company.com', 1, '生產主管', 'manager', CURRENT_TIMESTAMP, '$2a$11$你的密碼哈希')
ON CONFLICT ("EmployeeNumber") DO UPDATE SET
    "PasswordHash" = EXCLUDED."PasswordHash",
    "IsFirstLogin" = EXCLUDED."IsFirstLogin";
```

## 🔐 密碼哈希生成

如需手動生成密碼哈希，可以使用以下方法：

### 使用 .NET 工具
```csharp
using BCrypt.Net;
string password = "你的密碼";
string hash = BCrypt.Net.BCrypt.HashPassword(password);
Console.WriteLine(hash);
```

### 使用線上工具
- 搜尋 "BCrypt hash generator"
- 輸入密碼，選擇 rounds=11
- 複製生成的哈希值

## 🧪 測試流程

### 1. 創建帳號後測試
1. **員工功能測試**：
   - 登入員工帳號
   - 填寫積分表單
   - 查看個人積分記錄
   - 查看工作日誌

2. **主管功能測試**：
   - 登入主管帳號
   - 查看待審核記錄
   - 審核員工積分
   - 查看系統統計

### 2. 調試測試
訪問 `http://localhost:3002/debug-test` 確認所有功能正常。

## 📊 可用的部門與角色

### 部門列表
- 1 = 製造部
- 2 = 管理部
- 3 = 品質部
- 4 = 研發部
- 5 = 業務部

### 角色列表
- `employee` = 員工 (可提交積分)
- `manager` = 主管 (可審核積分)
- `admin` = 管理員 (完整權限)

## ✅ 確認清單

- [ ] 執行更新後的 `database_init.sql`
- [ ] 確認資料庫表格創建成功
- [ ] 確認33項積分標準已載入
- [ ] 創建至少一個員工帳號
- [ ] 創建至少一個主管帳號
- [ ] 測試登入功能
- [ ] 測試積分提交功能
- [ ] 測試審核功能
- [ ] 執行調試測試確認所有功能正常

## 🎉 完成

現在您擁有一個乾淨的積分管理系統環境，可以使用自己創建的帳號來測試所有功能！
