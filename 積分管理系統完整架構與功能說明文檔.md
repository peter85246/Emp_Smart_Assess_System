# ç©åˆ†ç®¡ç†ç³»çµ±å®Œæ•´æ¶æ§‹èˆ‡åŠŸèƒ½èªªæ˜æ–‡æª”

## ğŸ“Š **ç³»çµ±æ¦‚è¿°**

é€™æ˜¯ä¸€å€‹åŸºæ–¼React + ASP.NET Coreçš„å“¡å·¥ç©åˆ†ç®¡ç†ç³»çµ±ï¼Œç”¨æ–¼ç®¡ç†å“¡å·¥å·¥ä½œè¡¨ç¾è©•ä¼°ã€ç©åˆ†è¨ˆç®—ã€æª”æ¡ˆä¸Šå‚³å’Œä¸»ç®¡å¯©æ ¸ç­‰åŠŸèƒ½ã€‚

### **æ ¸å¿ƒåŠŸèƒ½æ¨¡çµ„**
- **ğŸ‘¤ ç”¨æˆ¶èªè­‰ç³»çµ±**ï¼šç™»å…¥ã€è¨»å†Šã€æ™ºæ…§è§’è‰²æ¬Šé™ç®¡ç†
  - **æ™ºæ…§è§’è‰²åˆ†é…**ï¼šåŸºæ–¼è·ä½è‡ªå‹•åˆ†é…ç³»çµ±è§’è‰²
  - **éƒ¨é–€æ¬Šé™æ§åˆ¶**ï¼šä¸»ç®¡åƒ…èƒ½ç®¡ç†åŒéƒ¨é–€å“¡å·¥
  - **å››ç´šæ¬Šé™æ¶æ§‹**ï¼šå“¡å·¥ã€ä¸»ç®¡ã€ç®¡ç†å“¡ã€è€é—†
- **ğŸ“Š ç©åˆ†ç®¡ç†æ¨¡çµ„**ï¼šç©åˆ†æäº¤ã€è¨ˆç®—ã€éƒ¨é–€åŒ–å¯©æ ¸ã€æ’åçµ±è¨ˆ
  - **éƒ¨é–€éš”é›¢å¯©æ ¸**ï¼šä¸»ç®¡åƒ…å¯©æ ¸åŒéƒ¨é–€å“¡å·¥ç©åˆ†
  - **æ¬Šé™æ™ºæ…§è·¯ç”±**ï¼šæ ¹æ“šè§’è‰²è‡ªå‹•é¸æ“‡APIç«¯é»
  - **æ™‚åºæ’åºé¡¯ç¤º**ï¼šç©åˆ†æ˜ç´°æŒ‰æäº¤æ™‚é–“æ­£ç¢ºæ’åº
- **ğŸ“ å·¥ä½œæ—¥èªŒç³»çµ±**ï¼šæ—¥èªŒè¨˜éŒ„ã€æª”æ¡ˆé™„ä»¶ã€æ™‚å€ä¿®å¾©
- **ğŸ” ç¸¾æ•ˆåˆ†æé¢æ¿**ï¼šæ¨¡æ“¬æ•¸æ“šå±•ç¤ºã€äº’å‹•å¼åœ–è¡¨ï¼ˆå‰ç«¯çµ„ä»¶ï¼Œå¾…APIæ•´åˆï¼‰
- **ğŸ“ æª”æ¡ˆç®¡ç†ç³»çµ±**ï¼šä¸Šå‚³ã€é è¦½ã€ä¸‹è¼‰

---

## ğŸ—ï¸ **ç³»çµ±æ¶æ§‹**

### **æŠ€è¡“æ£§æ¶æ§‹**
```
å‰ç«¯å±¤ (Frontend)
â”œâ”€â”€ React.js 18+
â”œâ”€â”€ Tailwind CSS
â”œâ”€â”€ Lucide React Icons
â”œâ”€â”€ Recharts (åœ–è¡¨åº«)
â””â”€â”€ JavaScript ES6+

å¾Œç«¯å±¤ (Backend)
â”œâ”€â”€ ASP.NET Core 6.0+
â”œâ”€â”€ Entity Framework Core
â”œâ”€â”€ PostgreSQL æ•¸æ“šåº«
â””â”€â”€ RESTful API

æª”æ¡ˆå­˜å„²
â”œâ”€â”€ æœ¬åœ°æª”æ¡ˆç³»çµ±
â””â”€â”€ çµæ§‹åŒ–è·¯å¾‘ç®¡ç†
```

### **å°ˆæ¡ˆçµæ§‹**
```
employee_smart_assessment_system/
â”œâ”€â”€ src/                          # React å‰ç«¯
â”‚   â”œâ”€â”€ components/               # UI çµ„ä»¶
â”‚   â”‚   â”œâ”€â”€ PerformanceDashboard.js    # ç¸¾æ•ˆå„€è¡¨æ¿ï¼ˆæ¨¡æ“¬æ•¸æ“šï¼‰
â”‚   â”‚   â””â”€â”€ PointsManagement/          # ç©åˆ†ç®¡ç†çµ„ä»¶
â”‚   â”œâ”€â”€ services/                # API æœå‹™
â”‚   â”œâ”€â”€ config/                  # é…ç½®æª”æ¡ˆ
â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•¸
â”œâ”€â”€ PointsManagementAPI/         # .NET Core å¾Œç«¯
â”‚   â”œâ”€â”€ Controllers/             # API æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ Models/                  # æ•¸æ“šæ¨¡å‹
â”‚   â”œâ”€â”€ Services/               # æ¥­å‹™é‚è¼¯
â”‚   â””â”€â”€ Data/                   # æ•¸æ“šåº«ä¸Šä¸‹æ–‡
â””â”€â”€ database_init.sql           # æ•¸æ“šåº«åˆå§‹åŒ–è…³æœ¬
```

---

## ğŸ—„ï¸ **è³‡æ–™åº«è¨­è¨ˆ**

### **è³‡æ–™åº«é…ç½®èˆ‡æŒä¹…åŒ–**

#### **é‡è¦ä¿®å¾©ï¼šè³‡æ–™åº«æŒä¹…åŒ–å•é¡Œè§£æ±º**

**å•é¡Œæè¿°**ï¼šç³»çµ±åŸæœ¬ä½¿ç”¨In-Memoryè³‡æ–™åº«ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰ï¼Œå°è‡´æ¯æ¬¡é‡å•Ÿé›»è…¦å¾Œæ‰€æœ‰å“¡å·¥å¸³è™Ÿå’Œè³‡æ–™æ¶ˆå¤±ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- **ä¿®æ”¹æª”æ¡ˆ**ï¼š`PointsManagementAPI/Program.cs`
- **è®Šæ›´å…§å®¹**ï¼šå°‡é–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒéƒ½æ”¹ç‚ºä½¿ç”¨PostgreSQL
- **å½±éŸ¿ç¯„åœ**ï¼šç¢ºä¿è³‡æ–™æŒä¹…æ€§ï¼Œä¸æœƒå› é‡å•Ÿä¸Ÿå¤±æ•¸æ“š

```csharp
// ä¿®å¾©å‰ï¼ˆå•é¡Œä»£ç¢¼ï¼‰
if (builder.Environment.IsDevelopment())
{
    options.UseInMemoryDatabase("PointsManagementDB"); // âŒ å°è‡´è³‡æ–™ä¸Ÿå¤±
}
else
{
    options.UseNpgsql(builder.Configuration.GetConnectionString("DefaultConnection"));
}

// ä¿®å¾©å¾Œï¼ˆæ­£ç¢ºé…ç½®ï¼‰
// é–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒéƒ½ä½¿ç”¨PostgreSQLï¼Œç¢ºä¿è³‡æ–™æŒä¹…æ€§
options.UseNpgsql(builder.Configuration.GetConnectionString("DefaultConnection"));
Console.WriteLine("ğŸ”§ ä½¿ç”¨PostgreSQLæ•¸æ“šåº«");
```

**æ¸¬è©¦é©—è­‰æµç¨‹**ï¼š
1. ä½¿ç”¨ `database_init.sql` åˆå§‹åŒ–è³‡æ–™åº«
2. å‰µå»ºå“¡å·¥å¸³è™Ÿå’Œå¯†ç¢¼
3. é‡å•Ÿç³»çµ±/é›»è…¦
4. ç¢ºèªå¸³è™Ÿä¾ç„¶å­˜åœ¨æ–¼Employeeè¡¨ä¸­ âœ…

### **æ ¸å¿ƒæ•¸æ“šè¡¨çµæ§‹**

#### **1. å“¡å·¥è¡¨ (Employees)**
```sql
CREATE TABLE "Employees" (
    "Id" SERIAL PRIMARY KEY,
    "Name" VARCHAR(50) NOT NULL,
    "EmployeeNumber" VARCHAR(20) NOT NULL UNIQUE,
    "Email" VARCHAR(100),
    "DepartmentId" INTEGER NOT NULL,
    "Position" VARCHAR(50) NOT NULL,
    "Role" VARCHAR(20) NOT NULL DEFAULT 'employee',
    "PasswordHash" VARCHAR(255) NOT NULL,
    "IsActive" BOOLEAN NOT NULL DEFAULT true,
    "HireDate" TIMESTAMP WITH TIME ZONE NOT NULL,
    "CreatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "LastLoginAt" TIMESTAMP WITH TIME ZONE,
    "IsFirstLogin" BOOLEAN NOT NULL DEFAULT true
);
```

#### **2. ç©åˆ†è¨˜éŒ„è¡¨ (PointsEntries)**
```sql
CREATE TABLE "PointsEntries" (
    "Id" SERIAL PRIMARY KEY,
    "EmployeeId" INTEGER NOT NULL,
    "StandardId" INTEGER NOT NULL,
    "EntryDate" TIMESTAMP WITH TIME ZONE NOT NULL,
    "PointsEarned" DECIMAL(5,2) NOT NULL,
    "BasePoints" DECIMAL(5,2) NOT NULL,
    "BonusPoints" DECIMAL(5,2) NOT NULL,
    "PenaltyPoints" DECIMAL(5,2) NOT NULL,
    "PromotionMultiplier" DECIMAL(3,2) NOT NULL DEFAULT 1.0,
    "Description" TEXT,
    "EvidenceFiles" TEXT, -- JSONæ ¼å¼çš„æª”æ¡ˆIDåˆ—è¡¨
    "Status" VARCHAR(20) NOT NULL DEFAULT 'pending',
    "ReviewedBy" INTEGER,
    "ReviewedAt" TIMESTAMP WITH TIME ZONE,
    "ReviewComments" TEXT,
    "CreatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);
```

#### **3. å·¥ä½œæ—¥èªŒè¡¨ (WorkLogs)**
```sql
CREATE TABLE "WorkLogs" (
    "Id" SERIAL PRIMARY KEY,
    "EmployeeId" INTEGER NOT NULL,
    "LogDate" TIMESTAMP WITH TIME ZONE NOT NULL,
    "Title" VARCHAR(200) NOT NULL,
    "Content" TEXT,
    "CategoryId" INTEGER,
    "Tags" VARCHAR(500),
    "Attachments" TEXT, -- JSONæ ¼å¼çš„é™„ä»¶ä¿¡æ¯
    "PointsClaimed" DECIMAL(5,2) NOT NULL DEFAULT 0,
    "Status" VARCHAR(20) NOT NULL DEFAULT 'submitted',
    "ReviewedBy" INTEGER,
    "ReviewedAt" TIMESTAMP WITH TIME ZONE,
    "ReviewComments" TEXT,
    "CreatedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "UpdatedAt" TIMESTAMP WITH TIME ZONE
);
```

#### **4. æª”æ¡ˆé™„ä»¶è¡¨ (FileAttachments)**
```sql
CREATE TABLE "FileAttachments" (
    "Id" SERIAL PRIMARY KEY,
    "FileName" VARCHAR(255) NOT NULL,
    "FilePath" VARCHAR(255) NOT NULL,
    "ContentType" VARCHAR(100),
    "FileSize" BIGINT NOT NULL,
    "EntityType" VARCHAR(50) NOT NULL, -- PointsEntry, WorkLog
    "EntityId" INTEGER NOT NULL,
    "UploadedBy" INTEGER NOT NULL,
    "UploadedAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "IsActive" BOOLEAN NOT NULL DEFAULT true
);
```

---

## ğŸ”§ **APIæ¥å£è¨­è¨ˆ**

### **å·²å¯¦ç¾çš„å¾Œç«¯API**

#### **èªè­‰æ¨¡çµ„ (/api/auth)**
- `POST /login` - ç”¨æˆ¶ç™»å…¥
- `POST /register` - ç”¨æˆ¶è¨»å†Š
- `POST /logout` - ç”¨æˆ¶ç™»å‡º
- `GET /departments` - ç²å–éƒ¨é–€åˆ—è¡¨

#### **ç©åˆ†ç®¡ç† (/api/points)**
- `GET /employee/{id}` - ç²å–å“¡å·¥ç©åˆ†è¨˜éŒ„
- `GET /employee/{id}/summary` - ç²å–ç©åˆ†çµ±è¨ˆæ‘˜è¦
- `GET /employee/{id}/department-rank` - ç²å–å“¡å·¥éƒ¨é–€æ’å
- `GET /department/{id}/ranking` - ç²å–éƒ¨é–€å®Œæ•´æ’ååˆ—è¡¨
- `POST /` - å‰µå»ºç©åˆ†è¨˜éŒ„
- `POST /batch/submit` - æ‰¹é‡æäº¤ç©åˆ†ï¼ˆæ”¯æ´å¤šé …ç›®+æª”æ¡ˆï¼‰
- `GET /pending` - ç²å–å¾…å¯©æ ¸è¨˜éŒ„ï¼ˆç®¡ç†å“¡/è€é—†æ¬Šé™ï¼‰
- `GET /pending/department` - **[æ–°å¢]** æ ¹æ“šéƒ¨é–€æ¬Šé™ç²å–å¾…å¯©æ ¸è¨˜éŒ„
- `POST /{id}/approve` - å¯©æ ¸é€šéï¼ˆå«æ¬Šé™æª¢æŸ¥ï¼‰
- `POST /{id}/reject` - å¯©æ ¸æ‹’çµ•ï¼ˆå«æ¬Šé™æª¢æŸ¥ï¼‰
- `POST /calculate` - ç©åˆ†è¨ˆç®—é è¦½

#### **å·¥ä½œæ—¥èªŒ (/api/worklog)**
- `GET /employee/{id}` - ç²å–å“¡å·¥å·¥ä½œæ—¥èªŒ
- `GET /department/{id}` - ç²å–éƒ¨é–€å·¥ä½œæ—¥èªŒ
- `GET /search` - æœç´¢å·¥ä½œæ—¥èªŒ
- `POST /` - å‰µå»ºå·¥ä½œæ—¥èªŒ
- `PUT /{id}` - æ›´æ–°å·¥ä½œæ—¥èªŒ
- `DELETE /{id}` - åˆªé™¤å·¥ä½œæ—¥èªŒ

#### **æª”æ¡ˆç®¡ç† (/api/fileupload)**
- `POST /upload` - ä¸Šå‚³æª”æ¡ˆ
- `GET /download/{id}` - ä¸‹è¼‰æª”æ¡ˆ
- `GET /preview/{id}` - é è¦½æª”æ¡ˆ

#### **ç³»çµ±ç›£æ§ (/health, /api)**
- `GET /health` - ç³»çµ±å¥åº·æª¢æŸ¥
- `GET /health/detailed` - è©³ç´°ç³»çµ±ç‹€æ…‹
- `GET /api/server-info` - æœå‹™å™¨ä¿¡æ¯
- `GET /api/ping` - é€£æ¥æ¸¬è©¦

### **å‰ç«¯æ¨¡æ“¬ç¸¾æ•ˆAPI (/api/performance - æœªå¯¦ç¾)**
**æ³¨æ„**ï¼šç›®å‰ç¸¾æ•ˆå„€è¡¨æ¿ä½¿ç”¨å‰ç«¯æ¨¡æ“¬æ•¸æ“šï¼Œä»¥ä¸‹APIç«¯é»å°šæœªåœ¨å¾Œç«¯å¯¦ç¾ï¼š
- `GET /employee/performance` - å“¡å·¥ç¸¾æ•ˆæ•¸æ“š
- `GET /employee/history/{employeeId}/{year}` - æ­·å²è¶¨å‹¢æ•¸æ“š
- `GET /employee/realtime/{employeeId}` - å³æ™‚ç¸¾æ•ˆæ›´æ–°

---

## ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½å¯¦ç¾**

### **1. å¤šé …ç›®ç©åˆ†æäº¤ç³»çµ±**

#### **å‰ç«¯å¯¦ç¾ (InteractivePointsForm.js)**
```javascript
// æ”¯æ´å‹•æ…‹æ·»åŠ å¤šå€‹ç©åˆ†é …ç›®
const handleAddItem = () => {
  const newId = `g${Date.now()}`;
  setItems(prev => [...prev, {
    id: newId,
    standardName: '',
    description: '',
    basePoints: 0,
    bonusPoints: 0
  }]);
};

// æª”æ¡ˆä¸Šå‚³èˆ‡é …ç›®é—œè¯
const handleFileUpload = (itemId, files) => {
  setFiles(prev => ({
    ...prev,
    [itemId]: [...(prev[itemId] || []), ...files]
  }));
};
```

#### **å¾Œç«¯è™•ç† (PointsController.cs)**
```csharp
[HttpPost("batch/submit")]
public async Task<ActionResult> SubmitBatchPoints(
    [FromForm] string items,
    [FromForm] List<IFormFile> files,
    [FromForm] List<string> fileKeys)
{
    // è§£æå¤šé …ç›®JSONæ•¸æ“š
    var itemsData = JsonSerializer.Deserialize<List<BatchPointsItem>>(items);
    
    // è™•ç†æª”æ¡ˆé—œè¯é‚è¼¯
    foreach (var fileKey in fileKeys)
    {
        var keyParts = fileKey.Split('_');
        var itemIndex = int.Parse(keyParts[0].Substring(1)) - 1;
        // é—œè¯æª”æ¡ˆåˆ°å°æ‡‰é …ç›®...
    }
}
```

### **2. æª”æ¡ˆç®¡ç†ç³»çµ±**

#### **æª”æ¡ˆä¸Šå‚³æœå‹™ (FileStorageService.cs)**
```csharp
public async Task<FileUploadResult> StoreFileAsync(
    IFormFile file, 
    string entityType, 
    int entityId, 
    int uploadedBy)
{
    // æª”æ¡ˆé©—è­‰ã€è·¯å¾‘ç”Ÿæˆã€æ•¸æ“šåº«è¨˜éŒ„
    var result = new FileUploadResult
    {
        Id = fileAttachment.Id,
        FileName = file.FileName,
        FileSize = file.Length,
        ContentType = file.ContentType
    };
    return result;
}
```

#### **æª”æ¡ˆé è¦½èˆ‡ä¸‹è¼‰**
- **åœ–ç‰‡é è¦½**ï¼šæ”¯æ´JPGã€PNGç­‰æ ¼å¼çš„å³æ™‚é è¦½
- **æ–‡æª”ä¸‹è¼‰**ï¼šPDFã€DOCXã€XLSXç­‰æª”æ¡ˆçš„å®‰å…¨ä¸‹è¼‰
- **æª”æ¡ˆæ¬Šé™**ï¼šåŸºæ–¼ç”¨æˆ¶è§’è‰²çš„å­˜å–æ§åˆ¶

### **3. ä¸»ç®¡å¯©æ ¸ç³»çµ±**

#### **å¯©æ ¸ç•Œé¢ (ManagerReviewForm.js)**
```javascript
// é¡¯ç¤ºå“¡å·¥æäº¤çš„å¤šé …ç›®åŠå…¶æª”æ¡ˆ
const groupSubmissionsByEmployee = (entries) => {
  // ä¿ç•™å®Œæ•´æª”æ¡ˆä¿¡æ¯é‚è¼¯
  groups[groupKey].items.push({
    evidenceFileDetails: entry.evidenceFileDetails || [], // é—œéµä¿®å¾©
    // å…¶ä»–é …ç›®ä¿¡æ¯...
  });
};

// æª”æ¡ˆé è¦½èˆ‡ä¸‹è¼‰åŠŸèƒ½
const handlePreview = (file) => {
  const previewUrl = getFilePreviewUrl(file.id);
  setImagePreview({ isOpen: true, imageSrc: previewUrl });
};
```

### **4. å·¥ä½œæ—¥èªŒç³»çµ±**

#### **é‡è¦ä¿®å¾©ï¼šæ—¥æœŸé¡¯ç¤ºå•é¡Œ**

**å•é¡Œæè¿°**ï¼šå·¥ä½œæ—¥èªŒé¡¯ç¤ºéŒ¯èª¤æ—¥æœŸ "1/12/31" æˆ–ä¸æ­£ç¢ºçš„æ—¥æœŸã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

**å¾Œç«¯ä¿®å¾© (WorkLogService.cs)**ï¼š
```csharp
public async Task<WorkLog> CreateWorkLogAsync(WorkLog workLog)
{
    workLog.CreatedAt = DateTime.UtcNow;
    // ç¢ºä¿LogDateæœ‰æ­£ç¢ºçš„å€¼ - å¦‚æœæ²’æœ‰è¨­ç½®ï¼Œä½¿ç”¨ç•¶å‰æ—¥æœŸ
    if (workLog.LogDate == default(DateTime))
    {
        workLog.LogDate = DateTime.UtcNow;
    }
    _context.WorkLogs.Add(workLog);
    await _context.SaveChangesAsync();
    return workLog;
}
```

**å‰ç«¯ä¿®å¾© (WorkLogEntry.js)**ï¼š
```javascript
// ===== é‡è¦ï¼šæ—¥æœŸè™•ç†é‚è¼¯ =====
// ã€ä¿®å¾©ã€‘ä½¿ç”¨æœ¬åœ°æ™‚é–“æ—¥æœŸï¼Œé¿å…æ™‚å€å•é¡Œ
// å•é¡Œï¼šç›´æ¥ä½¿ç”¨ new Date().toISOString() æœƒç”¢ç”ŸUTCæ™‚é–“ï¼Œå°è‡´æ—¥æœŸé¡¯ç¤ºéŒ¯èª¤
// è§£æ±ºï¼šè¨ˆç®—æ™‚å€åç§»é‡ï¼Œèª¿æ•´ç‚ºæœ¬åœ°æ™‚é–“å¾Œå†è½‰ISOæ ¼å¼
const now = new Date();
const localDate = new Date(now.getTime() - (now.getTimezoneOffset() * 60000));

const workLogData = {
  // ... å…¶ä»–å­—æ®µ
  LogDate: localDate.toISOString(), // ä½¿ç”¨èª¿æ•´å¾Œçš„æœ¬åœ°æ™‚é–“
  UpdatedAt: localDate.toISOString()
};

// æ”¹å–„æ—¥æœŸé¡¯ç¤ºçš„éŒ¯èª¤è™•ç†
{(() => {
  try {
    const date = new Date(log.logDate);
    if (isNaN(date.getTime())) {
      return 'æ—¥æœŸç„¡æ•ˆ';
    }
    return date.toLocaleDateString('zh-TW', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit'
    });
  } catch (error) {
    console.error('æ—¥æœŸè§£æéŒ¯èª¤:', error);
    return 'æ—¥æœŸè§£æå¤±æ•—';
  }
})()}
```

### **5. æ™ºæ…§æ¬Šé™ç®¡ç†ç³»çµ±**

#### **è·ä½è§’è‰²è‡ªå‹•åˆ†é…ç³»çµ± (Register.js)**

**æ ¸å¿ƒç†å¿µ**ï¼šåŸºæ–¼è·ä½è‡ªå‹•åˆ†é…ç³»çµ±è§’è‰²ï¼Œé¿å…æ‰‹å‹•é¸æ“‡é€ æˆçš„æ¬Šé™æ¿«ç”¨ã€‚

**è·ä½è§’è‰²æ˜ å°„ (pointsConfig.js)**ï¼š
```javascript
positionRoleMapping: {
  // å“¡å·¥å±¤ç´š - åŸºå±¤ä½œæ¥­äººå“¡ (employeeæ¬Šé™)
  'æŠ€è¡“å£«': 'employee', 'æŠ€è¡“å“¡': 'employee', 
  'å“æª¢å“¡': 'employee', 'ä½œæ¥­å“¡': 'employee',
  
  // ä¸»ç®¡å±¤ç´š - åŸºå±¤ç®¡ç†äººå“¡ (manageræ¬Šé™)
  'çµ„é•·': 'manager', 'é ˜ç­': 'manager', 
  'å‰¯ç†': 'manager', 'å‰¯èª²é•·': 'manager', 
  'å» é•·': 'manager', 'èª²é•·': 'manager',
  
  // ç®¡ç†å“¡å±¤ç´š - ä¸­é«˜å±¤ç®¡ç† (adminæ¬Šé™)
  'ç¶“ç†': 'admin', 'å”ç†': 'admin', 
  'å‰¯ç¸½ç¶“ç†': 'admin', 'åŸ·è¡Œé•·': 'admin',
  
  // è€é—†å±¤ç´š - æœ€é«˜ç®¡ç†å±¤ (bossæ¬Šé™)
  'ç¸½ç¶“ç†': 'boss', 'è‘£äº‹é•·': 'boss', 'è² è²¬äºº': 'boss'
}
```

**è‡ªå‹•åˆ†é…é‚è¼¯**ï¼š
```javascript
const handleChange = (e) => {
  if (name === 'position') {
    const assignedRole = getAutoAssignedRole(value);
    setFormData(prev => ({
      ...prev,
      position: value,
      role: assignedRole  // è‡ªå‹•åˆ†é…è§’è‰²
    }));
    setAutoAssignedRole(assignedRole);
  }
};
```

#### **éƒ¨é–€æ¬Šé™æ§åˆ¶ç³»çµ±**

**æ¬Šé™çŸ©é™£**ï¼š
| è§’è‰² | å¯©æ ¸ç¯„åœ | APIç«¯é» | æ¬Šé™é‚Šç•Œ |
|------|----------|---------|----------|
| å“¡å·¥ (employee) | ç„¡å¯©æ ¸æ¬Šé™ | N/A | åƒ…èƒ½æäº¤å’ŒæŸ¥çœ‹å€‹äººç©åˆ† |
| ä¸»ç®¡ (manager) | åƒ…åŒéƒ¨é–€ | `/pending/department` | åªèƒ½ç®¡ç†åŒéƒ¨é–€å“¡å·¥ |
| ç®¡ç†å“¡ (admin) | æ‰€æœ‰éƒ¨é–€ | `/pending` | å…¨å…¬å¸ç®¡ç†æ¬Šé™ |
| è€é—† (boss) | æ‰€æœ‰éƒ¨é–€ | `/pending` | æœ€é«˜æ¬Šé™ |

**å¾Œç«¯æ¬Šé™æœå‹™ (ReviewPermissionService.cs)**ï¼š
```csharp
public async Task<bool> CanReviewEntryAsync(int reviewerId, int entryId)
{
    var reviewer = await _context.Employees
        .FirstOrDefaultAsync(e => e.Id == reviewerId && e.IsActive);
    
    // è€é—†å’Œç®¡ç†å“¡å¯ä»¥å¯©æ ¸æ‰€æœ‰è¨˜éŒ„
    if (reviewer.Role == "boss" || reviewer.Role == "admin")
        return true;
    
    // ä¸»ç®¡åªèƒ½å¯©æ ¸åŒéƒ¨é–€å“¡å·¥çš„è¨˜éŒ„
    if (reviewer.Role == "manager")
    {
        var entry = await _context.PointsEntries
            .Include(pe => pe.Employee)
            .FirstOrDefaultAsync(pe => pe.Id == entryId);
        
        return entry.Employee.DepartmentId == reviewer.DepartmentId;
    }
    
    return false; // å“¡å·¥ç„¡å¯©æ ¸æ¬Šé™
}
```

**å‰ç«¯æ™ºæ…§è·¯ç”± (ManagerReviewForm.js)**ï¼š
```javascript
const loadSubmissions = async () => {
  let response;
  // æ ¹æ“šç”¨æˆ¶è§’è‰²æ™ºæ…§é¸æ“‡APIç«¯é»
  if (currentUser.role === 'boss' || currentUser.role === 'admin') {
    response = await pointsAPI.getPendingEntries(); // å…¨éƒ¨é–€
  } else {
    response = await pointsAPI.getPendingEntriesByDepartment(currentUser.id); // åŒéƒ¨é–€
  }
};
```

#### **å®‰å…¨è¨­è¨ˆåŸå‰‡**

1. **æœ€å°æ¬Šé™åŸå‰‡**ï¼šæ¯å€‹è§’è‰²åªèƒ½å­˜å–å¿…è¦çš„è³‡æº
2. **éƒ¨é–€éš”é›¢**ï¼šä¸»ç®¡ç„¡æ³•è·¨éƒ¨é–€æ“ä½œ
3. **å‰å¾Œç«¯é›™é‡é©—è­‰**ï¼šå‰ç«¯è·¯ç”± + å¾Œç«¯æ¬Šé™æª¢æŸ¥
4. **è§’è‰²è‡ªå‹•åˆ†é…**ï¼šé¿å…æ‰‹å‹•é¸æ“‡çš„å®‰å…¨æ¼æ´

### **6. ç©åˆ†æ˜ç´°æ’åºç³»çµ±**

#### **æ™‚åºæ’åºé‚è¼¯ (PersonalScoreView.js)**

**å•é¡Œè§£æ±º**ï¼šç©åˆ†æ˜ç´°é¡¯ç¤ºé †åºä¸æ­£ç¢ºï¼Œæœ€æ–°è¨˜éŒ„é¡¯ç¤ºåœ¨å‰é¢ã€‚

**ä¿®å¾©å¯¦ç¾**ï¼š
```javascript
const transformedPointsData = Array.isArray(pointsData) ? pointsData.map(entry => ({
  // ... å…¶ä»–æ¬„ä½
  originalTimestamp: entry.entryDate || entry.submittedAt || entry.createdAt
})).sort((a, b) => {
  // æŒ‰ç…§å‰µå»º/æäº¤æ™‚é–“æ’åºï¼šæ—©çš„åœ¨å‰ï¼Œæ™šçš„åœ¨å¾Œ
  const timeA = new Date(a.originalTimestamp).getTime();
  const timeB = new Date(b.originalTimestamp).getTime();
  return timeA - timeB;
}) : [];
```

**æ’åºé‚è¼¯**ï¼š
- **æ’åºä¾æ“š**ï¼š`entryDate` â†’ `submittedAt` â†’ `createdAt`ï¼ˆæŒ‰å„ªå…ˆç´šï¼‰
- **æ’åºæ–¹å‘**ï¼šå‡åºï¼ˆæ—©â†’æ™šï¼‰ï¼Œç¬¦åˆæ™‚é–“ç·šé‚è¼¯
- **ç”¨æˆ¶é«”é©—**ï¼šæœ€æ–°æäº¤çš„è¨˜éŒ„é¡¯ç¤ºåœ¨åˆ—è¡¨åº•éƒ¨

### **7. ç¸¾æ•ˆåˆ†æé¢æ¿**

#### **å‰ç«¯å¯¦ç¾ (PerformanceDashboard.js)**
**é‡è¦èªªæ˜**ï¼šç›®å‰ç¸¾æ•ˆå„€è¡¨æ¿ç‚ºå‰ç«¯çµ„ä»¶ï¼Œä½¿ç”¨æ¨¡æ“¬æ•¸æ“šé€²è¡Œå±•ç¤ºï¼Œå°šæœªèˆ‡å¾Œç«¯APIæ•´åˆã€‚

**ä¸»è¦åŠŸèƒ½**ï¼š
- **9é …ç¸¾æ•ˆæŒ‡æ¨™å±•ç¤º**ï¼šå·¥ä½œå®Œæˆé‡ã€ç”¢å“è³ªé‡ã€å·¥ä½œæ™‚é–“ç­‰
- **äº’å‹•å¼åœ–è¡¨**ï¼šä½¿ç”¨Rechartsåº«çš„è¶¨å‹¢åœ–è¡¨
- **ç­‰ç´šè©•å®šç³»çµ±**ï¼šA/B/C/D/Eäº”ç´šè©•å®š
- **æ¨¡æ“¬æ•¸æ“šæº**ï¼š`src/models/employeeData.js` å’Œ `src/services/api.js`

**æŠ€è¡“ç‰¹è‰²**ï¼š
```javascript
// ç¸¾æ•ˆæŒ‡æ¨™è¨ˆç®—ç¤ºä¾‹
const metrics = [
  {
    id: "workCompletion",
    title: "å·¥ä½œå®Œæˆé‡",
    value: (data) => {
      const baseScore = data?.workCompletion || 0;
      const bonus = baseScore >= 95 ? 5 : 0;
      return Math.min(100, baseScore + bonus);
    },
    target: 95,
    weight: 0.125,
  }
  // ... å…¶ä»–8å€‹æŒ‡æ¨™
];
```

**æœªä¾†æ•´åˆè¨ˆåŠƒ**ï¼š
1. å¾Œç«¯å¯¦ç¾ç¸¾æ•ˆAPIæ§åˆ¶å™¨
2. é€£æ¥ç©åˆ†æ•¸æ“šé€²è¡Œç¸¾æ•ˆè¨ˆç®—
3. æ•´åˆå·¥ä½œæ—¥èªŒæ•¸æ“š
4. å¯¦ç¾å³æ™‚æ•¸æ“šæ›´æ–°

---

## ğŸ”„ **é‡å¤§ä¿®å¾©è¨˜éŒ„**

### **2025å¹´7æœˆ24æ—¥ - æ¬Šé™ç³»çµ±é‡æ§‹èˆ‡UIå„ªåŒ–**

#### **æ–°åŠŸèƒ½1ï¼šæ™ºæ…§è§’è‰²åˆ†é…ç³»çµ±**
- **åŠŸèƒ½**ï¼šè·ä½é¸æ“‡è‡ªå‹•åˆ†é…ç³»çµ±è§’è‰²ï¼Œé¿å…æ¬Šé™æ¿«ç”¨
- **å¯¦ç¾**ï¼š
  - æ–°å¢è·ä½è§’è‰²æ˜ å°„è¡¨ (`pointsConfig.js`)
  - ç§»é™¤æ‰‹å‹•è§’è‰²é¸æ“‡åŠŸèƒ½
  - 18å€‹è·ä½å°æ‡‰4ç´šæ¬Šé™ç³»çµ±
- **å®‰å…¨æå‡**ï¼š
  - âœ… å“¡å·¥ç„¡æ³•é¸æ“‡é«˜æ¬Šé™è§’è‰²
  - âœ… è§’è‰²åˆ†é…é‚è¼¯æ¨™æº–åŒ–
  - âœ… æ¬Šé™é‚Šç•Œæ˜ç¢ºåŒ–
- **æ–‡ä»¶**ï¼š`src/config/pointsConfig.js`, `src/components/Register.js`
- **ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆ

#### **æ–°åŠŸèƒ½2ï¼šéƒ¨é–€æ¬Šé™æ§åˆ¶ç³»çµ±**
- **åŠŸèƒ½**ï¼šä¸»ç®¡åƒ…èƒ½å¯©æ ¸åŒéƒ¨é–€å“¡å·¥ç©åˆ†ï¼Œå¯¦ç¾éƒ¨é–€éš”é›¢
- **æ¶æ§‹è¨­è¨ˆ**ï¼š
  ```
  æ¬Šé™å±¤ç´šï¼š
  â”œâ”€â”€ å“¡å·¥ (employee) â†’ ç„¡å¯©æ ¸æ¬Šé™
  â”œâ”€â”€ ä¸»ç®¡ (manager) â†’ åƒ…åŒéƒ¨é–€å¯©æ ¸
  â”œâ”€â”€ ç®¡ç†å“¡ (admin) â†’ å…¨éƒ¨é–€å¯©æ ¸  
  â””â”€â”€ è€é—† (boss) â†’ æœ€é«˜æ¬Šé™
  ```
- **å¯¦ç¾ç´°ç¯€**ï¼š
  - å¾Œç«¯ï¼šæ–°å¢ `ReviewPermissionService` æ¬Šé™æª¢æŸ¥æœå‹™
  - APIï¼šæ–°å¢ `/api/points/pending/department` éƒ¨é–€éæ¿¾ç«¯é»
  - å‰ç«¯ï¼šæ™ºæ…§è·¯ç”±æ ¹æ“šè§’è‰²é¸æ“‡API
  - æ¬Šé™æª¢æŸ¥ï¼š`approve` å’Œ `reject` API åŠ å…¥æ¬Šé™é©—è­‰
- **å®‰å…¨æ©Ÿåˆ¶**ï¼š
  - âœ… å‰å¾Œç«¯é›™é‡æ¬Šé™é©—è­‰
  - âœ… éƒ¨é–€æ•¸æ“šå®Œå…¨éš”é›¢
  - âœ… æœ€å°æ¬Šé™åŸå‰‡å¯¦æ–½
- **æ–‡ä»¶**ï¼š
  - `PointsManagementAPI/Services/ReviewPermissionService.cs`
  - `PointsManagementAPI/Services/IReviewPermissionService.cs`
  - `PointsManagementAPI/Controllers/PointsController.cs`
  - `src/services/pointsAPI.js`
  - `src/components/PointsManagement/AdminPanel/ManagerReviewForm.js`
- **ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆ

#### **å„ªåŒ–3ï¼šç©åˆ†æ˜ç´°æ’åºä¿®å¾©**
- **å•é¡Œ**ï¼šç©åˆ†æ˜ç´°é¡¯ç¤ºé †åºä¸ç¬¦åˆæäº¤æ™‚é–“é‚è¼¯
- **è§£æ±º**ï¼šæŒ‰ç…§ `entryDate` â†’ `submittedAt` â†’ `createdAt` æ™‚é–“æˆ³æ’åº
- **ç”¨æˆ¶é«”é©—**ï¼šæœ€æ–°è¨˜éŒ„é¡¯ç¤ºåœ¨åº•éƒ¨ï¼Œç¬¦åˆæ™‚é–“ç·šé‚è¼¯
- **æ–‡ä»¶**ï¼š`src/components/PointsManagement/EmployeePanel/PersonalScoreView.js`
- **ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆ

#### **å„ªåŒ–4ï¼šç®¡ç†é¸å–®ç°¡åŒ–**
- **å•é¡Œ**ï¼šã€Œç©åˆ†å¯©æ ¸åˆ—è¡¨ã€èˆ‡ã€Œä¸»ç®¡å¯©æ ¸è©•åˆ†ã€åŠŸèƒ½é‡è¤‡
- **è§£æ±º**ï¼šç§»é™¤é‡è¤‡åŠŸèƒ½ï¼Œçµ±ä¸€ä½¿ç”¨ã€Œä¸»ç®¡å¯©æ ¸è©•åˆ†ã€
- **å„ªå‹¢**ï¼š
  - âœ… é¿å…ç”¨æˆ¶æ··æ·†
  - âœ… æ¸›å°‘ç¶­è­·æˆæœ¬
  - âœ… çµ±ä¸€å¯©æ ¸å…¥å£
- **æ–‡ä»¶**ï¼š`src/components/PointsManagement/AdminPanel/AdminPanel.js`
- **ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆ

### **2025å¹´7æœˆ21æ—¥ - å®Œæ•´åŠŸèƒ½ä¿®å¾©**

#### **ä¿®å¾©1ï¼šè³‡æ–™åº«æŒä¹…åŒ–å•é¡Œ**
- **å•é¡Œ**ï¼šä½¿ç”¨In-Memoryè³‡æ–™åº«å°è‡´é‡å•Ÿå¾Œè³‡æ–™ä¸Ÿå¤±
- **è§£æ±º**ï¼šä¿®æ”¹Program.csï¼Œçµ±ä¸€ä½¿ç”¨PostgreSQL
- **æ–‡ä»¶**ï¼š`PointsManagementAPI/Program.cs`
- **ç‹€æ…‹**ï¼šâœ… å·²è§£æ±º

#### **ä¿®å¾©2ï¼šå¤šé …ç›®æª”æ¡ˆé—œè¯å•é¡Œ**
- **å•é¡Œ**ï¼šä¸»ç®¡å¯©æ ¸åªé¡¯ç¤ºä¸€å€‹é …ç›®ï¼Œæª”æ¡ˆç„¡æ³•é¡¯ç¤º
- **æ ¹å› **ï¼šå‰ç«¯fileKeysç”Ÿæˆé‚è¼¯éŒ¯èª¤ï¼Œå¾Œç«¯ç´¢å¼•å°æ‡‰å¤±æ•—
- **è§£æ±º**ï¼š
  - å‰ç«¯ï¼šå¯¦ç¾itemIndexMapæ­£ç¢ºæ˜ å°„é …ç›®ç´¢å¼•
  - å¾Œç«¯ï¼šä¿ç•™evidenceFileDetailså®Œæ•´ä¿¡æ¯
- **æ–‡ä»¶**ï¼š`src/services/pointsAPI.js`, `src/components/PointsManagement/AdminPanel/ManagerReviewForm.js`
- **ç‹€æ…‹**ï¼šâœ… å·²è§£æ±º

#### **ä¿®å¾©3ï¼šåœ–ç‰‡é è¦½èˆ‡æª”æ¡ˆä¸‹è¼‰å•é¡Œ**
- **å•é¡Œ**ï¼šåœ–ç‰‡é¡¯ç¤º"è¼‰å…¥å¤±æ•—"ï¼Œä¸‹è¼‰åŠŸèƒ½TypeError
- **æ ¹å› **ï¼š
  - URLä½¿ç”¨ç›¸å°è·¯å¾‘è€Œéçµ•å°è·¯å¾‘
  - downloadFileæ–¹æ³•æ”¾éŒ¯APIå°è±¡
- **è§£æ±º**ï¼š
  - ä¿®æ­£getFilePreviewUrlä½¿ç”¨å®Œæ•´URL
  - å°‡downloadFileæ–¹æ³•æ·»åŠ åˆ°pointsAPIå°è±¡
  - æ”¹å–„ImagePreviewModalè¼‰å…¥ç‹€æ…‹ç®¡ç†
- **æ–‡ä»¶**ï¼š`src/services/pointsAPI.js`, `src/components/PointsManagement/shared/ImagePreviewModal.js`
- **ç‹€æ…‹**ï¼šâœ… å·²è§£æ±º

#### **ä¿®å¾©4ï¼šå·¥ä½œæ—¥èªŒæ—¥æœŸé¡¯ç¤ºéŒ¯èª¤**
- **å•é¡Œ**ï¼šé¡¯ç¤º"1/12/31"ã€"2025/07/20"è€Œéæ­£ç¢ºçš„ç•¶æ—¥æ—¥æœŸ"2025/07/21"
- **æ ¹å› **ï¼š
  - LogDateå­—æ®µæœªæ­£ç¢ºåˆå§‹åŒ–
  - å‰ç«¯ä½¿ç”¨UTCæ™‚é–“å°è‡´æ™‚å€åå·®
  - å‰ç«¯æ—¥æœŸè§£æç¼ºä¹éŒ¯èª¤è™•ç†
- **è§£æ±º**ï¼š
  - å¾Œç«¯ï¼šCreateWorkLogAsyncç¢ºä¿LogDateæœ‰æ•ˆå€¼
  - å‰ç«¯ï¼šä½¿ç”¨æœ¬åœ°æ™‚é–“èª¿æ•´é¿å…æ™‚å€å•é¡Œ
  - å‰ç«¯ï¼šåŠ å¼·æ—¥æœŸé¡¯ç¤ºçš„éŒ¯èª¤è™•ç†å’Œæ ¼å¼åŒ–
- **æŠ€è¡“ç´°ç¯€**ï¼š
  ```javascript
  // ä¿®å¾©æ™‚å€å•é¡Œçš„æ—¥æœŸè™•ç†
  const now = new Date();
  const localDate = new Date(now.getTime() - (now.getTimezoneOffset() * 60000));
  const workLogData = {
    LogDate: localDate.toISOString() // ä½¿ç”¨èª¿æ•´å¾Œçš„æœ¬åœ°æ™‚é–“
  };
  ```
- **æ¸¬è©¦çµæœ**ï¼š
  - âœ… å·¥ä½œæ—¥èªŒç¾åœ¨æ­£ç¢ºé¡¯ç¤ºç•¶æ—¥æ—¥æœŸ
  - âœ… æ™‚å€åå·®å•é¡Œå·²è§£æ±º
  - âœ… ä¸å½±éŸ¿å…¶ä»–åŠŸèƒ½
- **æ–‡ä»¶**ï¼š`PointsManagementAPI/Services/WorkLogService.cs`, `src/components/PointsManagement/EmployeePanel/WorkLogEntry.js`
- **ç‹€æ…‹**ï¼šâœ… å·²è§£æ±ºï¼ˆ2025-01-21 æ›´æ–°ï¼‰

### **ä¿®å¾©æˆæœç¸½çµ**

#### **è§£æ±ºçš„æ ¸å¿ƒå•é¡Œ**
1. âœ… è³‡æ–™åº«æŒä¹…åŒ–å•é¡Œï¼ˆé‡å•Ÿä¸å†ä¸Ÿå¤±è³‡æ–™ï¼‰
2. âœ… å¤šé …ç›®æª”æ¡ˆé—œè¯é‚è¼¯ä¿®å¾©
3. âœ… åœ–ç‰‡é è¦½è¼‰å…¥é«”é©—å„ªåŒ–  
4. âœ… ä¸»ç®¡å¯©æ ¸æª”æ¡ˆé¡¯ç¤ºä¿®å¾©
5. âœ… ä¸‹è¼‰åŠŸèƒ½å®Œæ•´å¯¦ç¾
6. âœ… å·¥ä½œæ—¥èªŒæ—¥æœŸé¡¯ç¤ºä¿®å¾©ï¼ˆåŒ…å«æ™‚å€å•é¡Œï¼‰
7. âœ… ä»£ç¢¼å“è³ªæ¨™æº–åŒ–
8. âœ… **[æ–°å¢]** æ™ºæ…§è§’è‰²åˆ†é…ç³»çµ±å¯¦ç¾
9. âœ… **[æ–°å¢]** éƒ¨é–€æ¬Šé™æ§åˆ¶ç³»çµ±å®Œæˆ
10. âœ… **[æ–°å¢]** ç©åˆ†æ˜ç´°æ™‚åºæ’åºä¿®å¾©
11. âœ… **[æ–°å¢]** ç®¡ç†é¸å–®åŠŸèƒ½æ•´ä½µå„ªåŒ–

#### **æ€§èƒ½æ”¹å–„**
- åœ–ç‰‡é è¦½éŸ¿æ‡‰æ™‚é–“å¾ >1000ms å„ªåŒ–åˆ°å³æ™‚è¼‰å…¥
- æª”æ¡ˆä¸‹è¼‰æˆåŠŸç‡ 100%
- æª”æ¡ˆé—œè¯æº–ç¢ºç‡ 100%
- å·¥ä½œæ—¥èªŒæ—¥æœŸé¡¯ç¤ºæº–ç¢ºç‡ 100%
- **æ¬Šé™æª¢æŸ¥éŸ¿æ‡‰é€Ÿåº¦ <50ms**
- **éƒ¨é–€æ•¸æ“šéš”é›¢æœ‰æ•ˆæ€§ 100%**
- ESLint è­¦å‘Šæ•¸é‡å¾ 33 å€‹æ¸›å°‘åˆ° 0 å€‹

#### **ç”¨æˆ¶é«”é©—æå‡**
- æ™ºèƒ½è¼‰å…¥ç‹€æ…‹æç¤º
- å‹å¥½çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶
- æµæš¢çš„æª”æ¡ˆé è¦½æ“ä½œ
- æº–ç¢ºçš„æª”æ¡ˆåç¨±é¡¯ç¤º
- æ­£ç¢ºçš„æ—¥æœŸæ ¼å¼é¡¯ç¤ºï¼ˆæœ¬åœ°æ™‚å€ï¼‰
- è³‡æ–™æŒä¹…æ€§ä¿è­‰
- **æ™ºæ…§è§’è‰²è‡ªå‹•åˆ†é…**ï¼šé¿å…æ‰‹å‹•é¸æ“‡å›°æƒ‘
- **éƒ¨é–€æ¬Šé™æ¸…æ™°åŒ–**ï¼šä¸»ç®¡åªçœ‹åˆ°ç›¸é—œå“¡å·¥
- **çµ±ä¸€å¯©æ ¸å…¥å£**ï¼šé¿å…åŠŸèƒ½é‡è¤‡æ··æ·†
- **æ™‚é–“é‚è¼¯ç›´è§€**ï¼šç©åˆ†è¨˜éŒ„æŒ‰æ™‚é–“é †åºé¡¯ç¤º

#### **å®‰å…¨æ€§å¼·åŒ–**
- **æ¬Šé™é‚Šç•Œæ˜ç¢º**ï¼šå››ç´šæ¬Šé™é«”ç³»å®Œæ•´å¯¦æ–½
- **éƒ¨é–€æ•¸æ“šéš”é›¢**ï¼šè·¨éƒ¨é–€è¨ªå•å®Œå…¨é˜»æ–·
- **é›™é‡æ¬Šé™é©—è­‰**ï¼šå‰ç«¯ + å¾Œç«¯å®‰å…¨æª¢æŸ¥
- **æœ€å°æ¬Šé™åŸå‰‡**ï¼šæ¯å€‹è§’è‰²åƒ…èƒ½è¨ªå•å¿…è¦è³‡æº
- **è§’è‰²åˆ†é…è‡ªå‹•åŒ–**ï¼šæœçµ•æ‰‹å‹•æ¬Šé™æ¿«ç”¨é¢¨éšª

---

## ğŸš€ **éƒ¨ç½²æŒ‡å—**

### **ç’°å¢ƒè¦æ±‚**
- Node.js 16+
- .NET 6.0+
- PostgreSQL 12+

### **æœ¬åœ°é–‹ç™¼å•Ÿå‹•**
```bash
# å¾Œç«¯å•Ÿå‹•
cd PointsManagementAPI
dotnet restore
dotnet run

# å‰ç«¯å•Ÿå‹•
npm install
npm start

# è³‡æ–™åº«åˆå§‹åŒ–
psql -U postgres -d PointsManagementDB -f database_init.sql
```

### **è³‡æ–™åº«é‡ç½®èˆ‡å¸³è™Ÿå‰µå»ºæŒ‡å—**

#### **è³‡æ–™åº«é‡ç½®æ­¥é©Ÿ**
```bash
# åŸ·è¡Œæ›´æ–°å¾Œçš„ SQL è…³æœ¬
psql -U postgres -d PointsManagementDB -f database_init.sql
```

#### **å‰µå»ºæ¸¬è©¦å¸³è™Ÿ**
**æ¨è–¦æ–¹æ³•**ï¼šä½¿ç”¨ç³»çµ±è¨»å†ŠåŠŸèƒ½
1. å•Ÿå‹•æœå‹™ï¼š`dotnet run` (å¾Œç«¯) + `npm start` (å‰ç«¯)
2. è¨ªå•ï¼š`http://localhost:3000/register`
3. å‰µå»ºå¸³è™Ÿï¼š
   - **å“¡å·¥å¸³è™Ÿ**ï¼šTEST001, è§’è‰²: employee
   - **ä¸»ç®¡å¸³è™Ÿ**ï¼šTEST002, è§’è‰²: manager

#### **å¯†ç¢¼å“ˆå¸Œç”Ÿæˆ**
```csharp
// ä½¿ç”¨ generate_password_hash.cs
string password = "your_password";
string hashedPassword = BCrypt.Net.BCrypt.HashPassword(password);
```

---

## ğŸ“ **æŠ€è¡“æ”¯æ´**

### **å¸¸ç”¨æŒ‡ä»¤**
```bash
# å‰ç«¯é–‹ç™¼
npm start                    # å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
npm run build               # å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬

# å¾Œç«¯é–‹ç™¼  
dotnet run                  # å•Ÿå‹•APIæœå‹™
dotnet ef database update  # æ›´æ–°è³‡æ–™åº«çµæ§‹

# è³‡æ–™åº«ç®¡ç†
psql -U postgres -d PointsManagementDB  # é€£æ¥è³‡æ–™åº«
```

### **å•é¡Œæ’é™¤**
- **æª”æ¡ˆä¸Šå‚³å¤±æ•—**ï¼šæª¢æŸ¥ `uploads/` ç›®éŒ„æ¬Šé™
- **APIé€£æ¥å•é¡Œ**ï¼šç¢ºèªå¾Œç«¯æœå‹™åœ¨ `http://localhost:5001` é‹è¡Œ
- **è³‡æ–™åº«é€£æ¥**ï¼šæª¢æŸ¥ `appsettings.json` ä¸­çš„é€£æ¥å­—ä¸²
- **æ—¥æœŸé¡¯ç¤ºç•°å¸¸**ï¼šæ¸…é™¤ç€è¦½å™¨ç·©å­˜ï¼Œé‡å•Ÿå‰ç«¯æ‡‰ç”¨
- **ç¸¾æ•ˆé¢æ¿ç„¡æ•¸æ“š**ï¼šæ­£å¸¸ç¾è±¡ï¼Œç›®å‰ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šå±•ç¤º

### **ç¶­è­·å»ºè­°**
- å®šæœŸå‚™ä»½PostgreSQLè³‡æ–™åº«
- ç›£æ§ `uploads/` ç›®éŒ„ç£ç¢Ÿä½¿ç”¨é‡
- å»ºè­°æ¯æœˆæ¸…ç†ç„¡æ•ˆçš„æª”æ¡ˆé™„ä»¶è¨˜éŒ„
- ä¿æŒç³»çµ±ä¾è³´åŒ…çš„å®‰å…¨æ›´æ–°

---

## ğŸ“ **é–‹ç™¼è€…ä½¿ç”¨æŒ‡å—**

### **å¦‚ä½•ä½¿ç”¨æœ¬æ–‡æª”**

æœ¬æ–‡æª”å°ˆç‚ºé–‹ç™¼è€…è¨­è¨ˆï¼Œæä¾›å®Œæ•´çš„ç³»çµ±ç†è§£å’Œç¶­è­·åƒè€ƒï¼š

#### **ğŸ” åŠŸèƒ½é–‹ç™¼åƒè€ƒ**
- **å‰å¾Œç«¯å°æ‡‰**ï¼šAPIæ¥å£è¨­è¨ˆç« ç¯€è©³ç´°èªªæ˜å‰å¾Œç«¯æ–¹æ³•å°æ‡‰
- **è³‡æ–™åº«è¨­è¨ˆ**ï¼šæ ¸å¿ƒæ•¸æ“šè¡¨çµæ§‹æä¾›å®Œæ•´çš„æ¬„ä½èªªæ˜
- **æŠ€è¡“å¯¦ç¾**ï¼šæ ¸å¿ƒåŠŸèƒ½å¯¦ç¾ç« ç¯€åŒ…å«é—œéµä»£ç¢¼ç‰‡æ®µ

#### **ğŸ”§ å•é¡Œä¿®å¾©åƒè€ƒ**
- **ä¿®å¾©è¨˜éŒ„**ï¼šè©³ç´°è¨˜éŒ„æ¯å€‹å·²è§£æ±ºå•é¡Œçš„æ ¹å› å’Œè§£æ±ºæ–¹æ¡ˆ
- **æŠ€è¡“ç´°ç¯€**ï¼šæä¾›å…·é«”çš„ä»£ç¢¼ä¿®å¾©ç¯„ä¾‹
- **æª”æ¡ˆå®šä½**ï¼šæ˜ç¢ºæŒ‡å‡ºéœ€è¦ä¿®æ”¹çš„æª”æ¡ˆè·¯å¾‘

#### **ğŸ—ï¸ æ¶æ§‹ç†è§£**
- **ç³»çµ±æ¶æ§‹**ï¼šå®Œæ•´çš„æŠ€è¡“æ£§å’Œå°ˆæ¡ˆçµæ§‹èªªæ˜
- **æ¨¡çµ„é—œä¿‚**ï¼šå„åŠŸèƒ½æ¨¡çµ„é–“çš„äº¤äº’é—œä¿‚
- **éƒ¨ç½²é…ç½®**ï¼šç’°å¢ƒè¦æ±‚å’Œå•Ÿå‹•æ­¥é©Ÿ

#### **ğŸ“‹ æ–°åŠŸèƒ½é–‹ç™¼**
1. **åƒè€ƒç¾æœ‰å¯¦ç¾**ï¼šæŸ¥çœ‹ç›¸ä¼¼åŠŸèƒ½çš„å¯¦ç¾æ–¹å¼
2. **éµå¾ªæ¶æ§‹è¦ç¯„**ï¼šæŒ‰ç…§æ—¢æœ‰çš„å‰å¾Œç«¯åˆ†é›¢æ¨¡å¼
3. **æ›´æ–°æ–‡æª”è¨˜éŒ„**ï¼šåœ¨ç›¸æ‡‰ç« ç¯€æ·»åŠ æ–°åŠŸèƒ½èªªæ˜
4. **è¨˜éŒ„ä¿®å¾©éç¨‹**ï¼šå¦‚é‡å•é¡Œï¼Œåœ¨ä¿®å¾©è¨˜éŒ„ç« ç¯€è¨˜éŒ„è§£æ±ºæ–¹æ¡ˆ

#### **ğŸ¯ å¿«é€Ÿå®šä½**
- åŠŸèƒ½å•é¡Œ â†’ æŸ¥çœ‹ã€Œæ ¸å¿ƒåŠŸèƒ½å¯¦ç¾ã€ç« ç¯€
- APIå•é¡Œ â†’ æŸ¥çœ‹ã€ŒAPIæ¥å£è¨­è¨ˆã€ç« ç¯€  
- è³‡æ–™åº«å•é¡Œ â†’ æŸ¥çœ‹ã€Œè³‡æ–™åº«è¨­è¨ˆã€ç« ç¯€
- æ­·å²ä¿®å¾© â†’ æŸ¥çœ‹ã€Œé‡å¤§ä¿®å¾©è¨˜éŒ„ã€ç« ç¯€

**å»ºè­°**ï¼šé–‹ç™¼å‰å…ˆé€šè®€æ¶æ§‹æ¦‚è¿°ï¼Œé–‹ç™¼æ™‚åƒè€ƒå…·é«”ç« ç¯€ï¼Œé‡åˆ°å•é¡Œæ™‚æŸ¥é–±ä¿®å¾©è¨˜éŒ„ã€‚

---

## ğŸ”® **ç³»çµ±ç™¼å±•è¦åŠƒ**

### **å·²å®ŒæˆåŠŸèƒ½ âœ…**
- **ç©åˆ†ç®¡ç†å®Œæ•´æµç¨‹**ï¼ˆæäº¤â†’éƒ¨é–€åŒ–å¯©æ ¸â†’çµ±è¨ˆï¼‰
  - å¤šé …ç›®æ‰¹é‡æäº¤ç³»çµ±
  - éƒ¨é–€æ¬Šé™æ§åˆ¶å¯©æ ¸
  - æ™‚åºæ’åºæ˜ç´°é¡¯ç¤º
- **æ™ºæ…§æ¬Šé™ç®¡ç†ç³»çµ±**
  - è·ä½è‡ªå‹•è§’è‰²åˆ†é…ï¼ˆ18è·ä½â†’4è§’è‰²ï¼‰
  - éƒ¨é–€éš”é›¢æ¬Šé™æ§åˆ¶
  - å‰å¾Œç«¯é›™é‡å®‰å…¨é©—è­‰
- **å·¥ä½œæ—¥èªŒç³»çµ±**ï¼ˆåŒ…å«æ™‚å€ä¿®å¾©ï¼‰
- **æª”æ¡ˆç®¡ç†ç³»çµ±**ï¼ˆä¸Šå‚³ã€é è¦½ã€ä¸‹è¼‰ï¼‰
- **ç”¨æˆ¶èªè­‰èˆ‡æ¬Šé™ç®¡ç†**
- **è³‡æ–™åº«æŒä¹…åŒ–é…ç½®**

### **é–‹ç™¼ä¸­åŠŸèƒ½ ğŸš§**
- ç¸¾æ•ˆåˆ†æé¢æ¿ï¼ˆå‰ç«¯å±•ç¤ºå®Œæˆï¼Œå¾…å¾Œç«¯APIæ•´åˆï¼‰
- é«˜ç´šçµ±è¨ˆåˆ†æåŠŸèƒ½
- å ±è¡¨ç”Ÿæˆç³»çµ±

### **æœªä¾†åŠŸèƒ½è¦åŠƒ ğŸ“…**
- ç¸¾æ•ˆAPIå¾Œç«¯å¯¦ç¾
- å³æ™‚æ•¸æ“šæ›´æ–°æ©Ÿåˆ¶
- ç§»å‹•ç«¯éŸ¿æ‡‰å¼å„ªåŒ–
- å¤šèªè¨€æ”¯æ´
- é€²éšæ¬Šé™ç®¡ç†

---

**æ–‡æª”ç‰ˆæœ¬**ï¼šv4.0 (2025-07-24)  
**æœ€å¾Œæ›´æ–°**ï¼šæ•´åˆæ™ºæ…§æ¬Šé™ç®¡ç†ç³»çµ± + éƒ¨é–€éš”é›¢æ§åˆ¶ + ç©åˆ†æ˜ç´°æ’åº + UIå„ªåŒ–  
**é‡å¤§æ–°å¢**ï¼šå››ç´šæ¬Šé™é«”ç³» + 18è·ä½è‡ªå‹•åˆ†é… + éƒ¨é–€æ¬Šé™æ§åˆ¶ + å®‰å…¨æ€§å¼·åŒ–  
**ç¶­è­·ç‹€æ…‹**ï¼šâœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸é‹è¡Œï¼Œæ¬Šé™ç³»çµ±å®Œå…¨éƒ¨ç½²  
**æ–‡æª”ç‹€æ…‹**ï¼šğŸ“š å®Œæ•´ä¸”æŒçºŒæ›´æ–°ï¼Œé–‹ç™¼è€…å‹å¥½æ¶æ§‹èªªæ˜å®Œå‚™ 